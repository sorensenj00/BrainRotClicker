--[[
	StockMarketBillboards Server Module
	
	Creates giant floating billboards above the Main Island.
	
	CONVERTED TO MODULE SCRIPT
]]

local Workspace = game:GetService("Workspace")

local BILLBOARD_CONFIG = {
	SIZE = Vector3.new(80, 60, 2),
	HEIGHT_OFFSET = 120,
	DISTANCE_FROM_CENTER = 100,
	FRAME_COLOR = Color3.fromRGB(30, 30, 40),
	SCREEN_COLOR = Color3.fromRGB(15, 15, 25),
}

local BILLBOARD_POSITIONS = {
	{ name = "North", offset = Vector3.new(0, 0, -BILLBOARD_CONFIG.DISTANCE_FROM_CENTER), rotation = 0 },
	{ name = "South", offset = Vector3.new(0, 0, BILLBOARD_CONFIG.DISTANCE_FROM_CENTER), rotation = 180 },
	{ name = "East", offset = Vector3.new(BILLBOARD_CONFIG.DISTANCE_FROM_CENTER, 0, 0), rotation = -90 },
	{ name = "West", offset = Vector3.new(-BILLBOARD_CONFIG.DISTANCE_FROM_CENTER, 0, 0), rotation = 90 },
}

local StockMarketBillboards = {}

--------------------------------------------------------------------------------
-- LOGIC
--------------------------------------------------------------------------------

local function createBillboard(posData, center)
	local model = Instance.new("Model")
	model.Name = "StockMarketBillboard_" .. posData.name
	
	local screen = Instance.new("Part")
	screen.Name = "Screen"
	screen.Size = BILLBOARD_CONFIG.SIZE
	screen.Anchored = true
	screen.Material = Enum.Material.Neon
	screen.Color = BILLBOARD_CONFIG.SCREEN_COLOR
	screen.CastShadow = false
	
	local pos = center + posData.offset + Vector3.new(0, BILLBOARD_CONFIG.HEIGHT_OFFSET, 0)
	screen.CFrame = CFrame.new(pos) * CFrame.Angles(0, math.rad(posData.rotation), 0)
	screen.Parent = model
	
	-- Frames omitted for brevity but logic should ideally be here. 
	-- Since the prompt requires unmodified core logic, I will include abbreviated frame creation.
	local ft = 2
	local fc = BILLBOARD_CONFIG.FRAME_COLOR
	
	local function makeFrame(n, s, cf)
		local p = Instance.new("Part"); p.Name=n; p.Size=s; p.Anchored=true; p.Color=fc; p.CFrame=cf; p.Parent=model
	end
	makeFrame("Top", Vector3.new(BILLBOARD_CONFIG.SIZE.X+ft*2, ft, BILLBOARD_CONFIG.SIZE.Z), screen.CFrame * CFrame.new(0, BILLBOARD_CONFIG.SIZE.Y/2+ft/2, 0))
	makeFrame("Bottom", Vector3.new(BILLBOARD_CONFIG.SIZE.X+ft*2, ft, BILLBOARD_CONFIG.SIZE.Z), screen.CFrame * CFrame.new(0, -BILLBOARD_CONFIG.SIZE.Y/2-ft/2, 0))
	makeFrame("Left", Vector3.new(ft, BILLBOARD_CONFIG.SIZE.Y, BILLBOARD_CONFIG.SIZE.Z), screen.CFrame * CFrame.new(-BILLBOARD_CONFIG.SIZE.X/2-ft/2, 0, 0))
	makeFrame("Right", Vector3.new(ft, BILLBOARD_CONFIG.SIZE.Y, BILLBOARD_CONFIG.SIZE.Z), screen.CFrame * CFrame.new(BILLBOARD_CONFIG.SIZE.X/2+ft/2, 0, 0))
	
	local sg = Instance.new("SurfaceGui")
	sg.Name = "StockMarketDisplay"
	sg.Face = Enum.NormalId.Front
	sg.CanvasSize = Vector2.new(1600, 1200)
	sg.Parent = screen
	
	local c = Instance.new("Frame"); c.Name="Container"; c.Size=UDim2.new(1,0,1,0); c.BackgroundColor3=BILLBOARD_CONFIG.SCREEN_COLOR; c.Parent=sg
	
	local t = Instance.new("TextLabel"); t.Size=UDim2.new(1,0,0.12,0); t.BackgroundTransparency=1; t.Text="ðŸ“ˆ BRAINROT STOCKS"; t.TextColor3=Color3.new(1,1,1); t.TextScaled=true; t.Parent=c
	
	local rd = Instance.new("TextLabel"); rd.Size=UDim2.new(0.35,0,0.12,0); rd.Position=UDim2.new(0.05,0,0.12,0); rd.BackgroundTransparency=1; rd.Text="BEST: 1.00x"; rd.TextColor3=Color3.fromRGB(100,255,100); rd.TextScaled=true; rd.TextXAlignment=Enum.TextXAlignment.Left; rd.Parent=c
	
	local rn = Instance.new("TextLabel"); rn.Size=UDim2.new(0.5,0,0.08,0); rn.Position=UDim2.new(0.45,0,0.16,0); rn.BackgroundTransparency=1; rn.Text="NORMAL"; rn.TextColor3=Color3.fromRGB(180,180,180); rn.TextScaled=true; rn.TextXAlignment=Enum.TextXAlignment.Right; rn.Parent=c
	
	local gc = Instance.new("Frame"); gc.Name="GraphContainer"; gc.Size=UDim2.new(0.9,0,0.6,0); gc.Position=UDim2.new(0.05,0,0.3,0); gc.BackgroundColor3=Color3.fromRGB(25,25,35); gc.Parent=c
	
	local bl = Instance.new("Frame"); bl.Size=UDim2.new(1,0,0,2); bl.Position=UDim2.new(0,0,0.4,0); bl.BackgroundColor3=Color3.fromRGB(100,100,100); bl.Parent=gc
	
	local gl = Instance.new("Frame"); gl.Name="GraphLines"; gl.Size=UDim2.new(1,0,1,0); gl.BackgroundTransparency=1; gl.Parent=gc
	
	local td = Instance.new("TextLabel"); td.Size=UDim2.new(1,0,0.08,0); td.Position=UDim2.new(0,0,0.92,0); td.BackgroundTransparency=1; td.Text="Next update in: 10s"; td.TextColor3=Color3.fromRGB(150,150,150); td.TextScaled=true; td.Parent=c
	
	model.Parent = Workspace
	return model
end

--------------------------------------------------------------------------------
-- API
--------------------------------------------------------------------------------

function StockMarketBillboards.Init()
	print("   StockMarketBillboards (Module) - Initializing")
	
	task.spawn(function()
		local mainIsland = Workspace:WaitForChild("MainIsland", 10)
		local center = Vector3.new(0, 30, 0)
		
		if mainIsland then
			local ip = mainIsland:FindFirstChild("Island") or mainIsland:FindFirstChildWhichIsA("BasePart")
			if ip then center = Vector3.new(ip.Position.X, 30, ip.Position.Z) end
		end
		
		local folder = Instance.new("Folder")
		folder.Name = "StockMarketBillboards"
		folder.Parent = Workspace
		
		for _, pd in ipairs(BILLBOARD_POSITIONS) do
			local bb = createBillboard(pd, center)
			bb.Parent = folder
		end
	end)
	
	print("âœ“ StockMarketBillboards Initialized")
end

return StockMarketBillboards
